# issue.md

## 2024-XX-XX タイムラインオーバーレイ初期化エラー
- 現象: NodeEditorWindow の初期化時に `TimelineGridOverlay` に `set_column_units` が存在せず `AttributeError` が発生する。
- 原因: `TimelineGridOverlay` クラスでは列単位を設定するメソッド名が `set_units` のまま実装されており、ウィンドウ側の期待する `set_column_units` と不一致だった。
- 対応: `TimelineGridOverlay` に互換メソッド `set_column_units` を追加し、内部で既存の `set_units` を呼び出すことで例外を解消。

## 2025-XX-XX タイムライン背景描画の刷新
- 現象: タイムラインの列区切りと日付ラベルが個別のグラフィックスアイテムでオーバーレイ描画されており、背景色の変更要求に対応しづらかった。
- 原因: 背景やグリッド線を `QGraphicsRectItem` などのシーンアイテムで構成していたため、シーン全体の背景色を直接制御できず、描画コストも高かった。
- 対応: 背景のタイル生成を `QGraphicsView` の背景ブラシで描画する方式に改め、日付境界のグリッド線も同ブラシで統合的に描画するよう変更した。

## 2025-XX-XX ノードエディタ背景色変更が反映されない
- 現象: タイムライン背景色をカスタマイズしても表示が更新されず、ノードエディタ全体の背景が初期色のまま変化しない。
- 原因: 背景タイル生成のキャッシュ鍵にテーマ変更が含まれておらず、またテーマ変更時にレイヤへ再適用する手段がなかったため描画が再実行されなかった。
- 対応: テーマ更新用 API を追加し、背景色変更時にキャッシュを無効化してレイヤへ再適用し即時再描画するよう修正。

## 2025-XX-XX ノードエディタウィンドウの責務肥大化
- 現象: `NodeEditorWindow` にコンテンツブラウザ、インスペクタ、タイムライン整列ツールなど複数 UI 部品の生成・制御が集約され、クラスの責務が肥大化していた。
- 原因: ウィンドウカテゴリ内で部品ごとにモジュールを分離せず、全機能を単一クラスに実装していたため再利用性が低くなっていた。
- 対応: コンテンツブラウザとインスペクタ、整列ツールバーをそれぞれ専用の `QDockWidget`/`QToolBar` 実装へ切り出し、`NodeEditorWindow` はイベント仲介と状態管理に専念するよう再設計した。
